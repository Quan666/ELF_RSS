# 2.0 使用教程

> 注意：
>
> 1. 所有命令均分群组、和私聊两种情况，执行结果也会不同
> 2. [] 包起来的参数表示可选，但某些情况下为必须参数
> 3. 所有 订阅命令 群管都可使用（如果不需要请自行修改代码）
> 4. 私聊直接发送命令即可，群聊需在前面添加 **机器人昵称** 或者 **@机器人**
> 5. 所有参数之间均用空格分割，符号为英文标点

## 添加订阅

> 命令：add （添加订阅、sub）
>
> 参数：订阅名 [RSS 地址]
>
> 示例： `add test twitter/user/huagequan`
>
> 使用技巧：先快速添加订阅，之后再 通过 `change` 命令修改
>
> 命令解释：
>
> 1. 完全新增订阅时，必需 `订阅名` 及 `RSS地址（RSSHub订阅源可以省略域名，其余需要完整的URL地址）` 两个参数，默认订阅到当前 `群组` 或 `QQ`
> 2. 当该 `订阅名` 存在时，只需 `订阅名` 一个参数，此时会将该订阅订阅到当前 `群组` 或 `QQ`

## 删除订阅

> 命令：deldy （删除订阅、drop）
>
> 参数：订阅名
>
> 示例： `deldy test`
>
> 命令解释：
>
> 1. 在私聊使用该命令时，必需 `订阅名` 参数，可完全删除该订阅
> 2. 在群组使用该命令时，必需 `订阅名` 参数，默认将 该群组 从 订阅群组 中删除

## 所有订阅

> 命令：show_all（showall，select_all，selectall，所有订阅）
>
> 参数：[关键词]（支持正则，过滤生效范围：订阅名、订阅地址、QQ号、群号）
>
> 示例： `showall test` `showall 123`
>
> 命令解释：
>
> 1. 携带 `关键词` 参数时，展示该 群组 或 所有 订阅中含有关键词的订阅
> 2. 不携带 `关键词` 参数时，展示该 群组 或 所有 订阅
> 3. 当 `关键词` 参数为整数时候，只对超级管理员用户额外展示所有订阅中 `QQ号` 或 `群号` 含有关键词的订阅

## 查看订阅

> 命令：show（查看订阅）
>
> 参数：[订阅名]
>
> 示例： `show test`
>
> 命令解释：
>
> 1. 携带 `订阅名` 参数时，展示该订阅的详细信息
> 2. 不携带 `订阅名` 参数时，展示该 群组 或 QQ 的订阅详情

## 修改订阅

> 命令：change（修改订阅，moddy）
>
> 参数：订阅名[,订阅名,...] 属性=值[ 属性=值 ...]
>
> 示例： `change test1[,test2,...] qq=,123,234 qun=-1`
>
> 使用技巧：可以先只发送 `change` ，机器人会返回提示信息，无需记住复杂的参数列表
>
> 对应参数:
>
> 订阅名-name 禁止将多个订阅批量改名，会因为名称相同起冲突
> 订阅链接-url QQ-qq 群-qun 更新频率-time
> 代理-proxy 翻译-tl 仅title-ot，仅图片-op，仅含有图片-ohp
> 下载种子-downopen 白名单关键词-wkey 黑名单关键词-bkey 种子上传到群-upgroup
> 去重模式-mode
> 图片数量限制-img_num 只发送限定数量的图片，防止刷屏
> 正文待移除内容-rm_list 从正文中要移除的指定内容，支持正则
> 停止更新-stop
>
> **注：**
>
> 仅含有图片不同于仅图片，除了图片还会发送正文中的其他文本信息
>
> proxy、tl、ot、op、ohp、downopen、upgroup、stop  值为 1/0
>
> 去重模式分为按链接(link)、标题(title)、图片(image)判断
> 其中 image 模式,出于性能考虑以及避免误伤情况发生,生效对象限定为只带 1 张图片的消息,
> 此外,如果属性中带有 or 说明判断逻辑是任一匹配即去重,默认为全匹配
>
> 白名单关键词支持正则表达式，匹配时推送消息及下载，设为空(wkey=)时不生效
>
> 黑名单关键词同白名单一样，只是匹配时不推送，两者可以一起用
>
> 正文待移除内容因为参数解析的缘故，格式必须如：rm_list='a' 或 rm_list='a','b'
> 该处理过程是在解析 html 标签后进行的
> 要将该参数设为空使用 rm_list='-1'
>
> **2.1.9** 版本后：关键词支持正则表达式，匹配时推送**消息**及下载，设为空(downkey=)时不生效
> **2.1.9** 版本前：下载关键词支持正则表达式，匹配时下载
>
> QQ、群号、去重模式前加英文逗号表示追加,-1设为空
>
> 各个属性之间使用**空格**分割
>
> time 的值在为数字时，表示每分x钟进行一次更新操作，其值必须大于等于 1，单位分钟
>
> time属性兼容 Linux crontab 格式，**但不同的是，crontab 中的空格应该替换为 `_` 即下划线**
>
> 可以参考 [Linux crontab 命令](https://www.runoob.com/linux/linux-comm-crontab.html) 务必理解！但实际有少许不同，主要是设置第5个字段时，即每周有不同。
>
> 时间格式如下：
>
> ```text
>  f1_f2_f3_f4_f5
> ```
>
> - 其中 f1 是表示分钟，f2 表示小时，f3 表示一个月份中的第几日，f4 表示月份，f5 表示一个星期中的第几天。program 表示要执行的程序。
> - 当 f1 为 *时表示每分钟都要执行 program，f2 为* 时表示每小时都要执行程序，其馀类推
> - 当 f1 为 a-b 时表示从第 a 分钟到第 b 分钟这段时间内要执行，f2 为 a-b 时表示从第 a 到第 b 小时都要执行，其馀类推
> - 当 f1 为 */n 时表示每 n 分钟个时间间隔执行一次，f2 为*/n 表示每 n 小时个时间间隔执行一次，其馀类推
> - 当 f1 为 a, b, c, ... 时表示第 a, b, c, ... 分钟要执行，f2 为 a, b, c, ... 时表示第 a, b, c... 个小时要执行，其馀类推
>
> ```text
> *    *    *    *    *
> -    -    -    -    -
> |    |    |    |    |
> |    |    |    |    +----- 星期中星期几 (0 - 6) (星期一为0，星期天为6) (int|str) – number or name of weekday (0-6 or mon,tue,wed,thu,fri,sat,sun)
> |    |    |    +---------- 月份 (1 - 12)
> |    |    +--------------- 一个月中的第几天 (1 - 31)
> |    +-------------------- 小时 (0 - 23)
> +------------------------- 分钟 (0 - 59)
> ```
>
> 以下是一些示例：
>
> ``` text
> 1            # 每分钟执行一次（普通）
> 1_           # 每小时的第一分钟运行（cron）
> */1          # 每分钟执行一次
> *_*/1        # 每小时执行一次（注意，均在整点运行）
> *_*_*_*_0,1,2,6 # 每周1、2、3、日运行，周日为6
> 0_6-12/3_*_12_* #在 12 月内, 每天的早上 6 点到 12 点，每隔 3 个小时 0 分钟执行一次
> *_12_*          # 每天12点运行
> # 如果不生效请查看控制台输出
> ```
